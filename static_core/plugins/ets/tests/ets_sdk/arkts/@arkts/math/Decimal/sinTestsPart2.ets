/*
 * Copyright (c) 2025 Huawei Device Co., Ltd.
 * Licensed under the Apache License, Version 2.0(the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import { Decimal } from "@arkts.math.Decimal";

function main(): int {
    const suite = new arktest.ArkTestsuite("Decimal sin API tests");
    suite.addTest("Decimal sin with specific config", testSinWithSpecificConfig001);
    suite.addTest("Decimal sin with specific config", testSinWithSpecificConfig002);
    suite.addTest("Decimal sin with specific config", testSinWithSpecificConfig003);
    suite.addTest("Decimal sin with specific config", testSinWithSpecificConfig004);
    return suite.run();
}

function checkSinResult(n: string, pr: double, rm: int, expected: string) {
    Decimal.precision = pr;
    Decimal.rounding = rm;
    arktest.assertEQ(new Decimal(n).sin().valueOf(), expected);
}

function testSinWithSpecificConfig001() {
    Decimal.set({ precision: 40, rounding: 4, toExpNeg: -9e15, toExpPos: 9e15, minE: -9e15, maxE: 9e15 });
    checkSinResult('74298341154961724283464838063126436742467617925325544', 6, 5, '0.381838');
    checkSinResult('98.9', 1, 3, '-1');
    checkSinResult('223798525254185007541841321707204622.59819179923', 16, 1, '0.7304638404669184');
    checkSinResult('29832077939805655500490926756388', 31, 5, '0.9999881003434971787558628446047');
    checkSinResult('13555555555555.00000000000000000472565', 49, 1, '0.6767787926553990715415556952412713237217924208783');
    checkSinResult('899998709983400169781485597598985275361858454653904477166', 80, 0, '-0.9619682988852763093696947825524296540074948329137260856105387448568258894882118');
    checkSinResult('39826881720735191122621609200399853', 63, 6, '0.808868299975611790138921415253062939870563699821120858587818528');
    checkSinResult('0.005341982048471623278003226810889859381173803701969742990587783072822', 70, 4, '0.005341956641353734027312587021500975661701907307617983686735841700502311');
    checkSinResult('277.9997777777777716692059399741498679999', 30, 6, '0.999514190524582708045097875864');
    checkSinResult('61429536536284373.1373681766492167', 72, 0, '-0.987289391477952440400357263926723647295916567423922849613191038848150249');
}

function testSinWithSpecificConfig002() {
    checkSinResult('7499999999909999997.909999999999', 71, 4, '0.34301339416705489181513042461845425762147177499632116466434976820897798');
    checkSinResult('349999995999999999939992999.92', 78, 4, '0.470719374558628137654141208065693026899676258865423797523069796274766223234845');
    checkSinResult('44510000000002060000000000000000.0200000008', 20, 5, '0.94842545081726504808');
    checkSinResult('62222222222293973777.555555555555577777777777', 20, 1, '0.97474440584787996681');
    checkSinResult('0.00000075952439582097539633', 49, 6, '0.0000007595243958209023709318824206298992320090760083707');
    checkSinResult('6466917226846635097989717000204.490981137498768', 23, 6, '-0.5067890798594245927272');
    checkSinResult('90000000000000007122', 12, 0, '-0.953061948465');
    checkSinResult('0.422029137363394323', 22, 5, '0.4096123952171808560627');
    checkSinResult('818.843', 70, 1, '0.8968883045810930941510638401062405075664719019866066309176929107557629');
    checkSinResult('30000000000000000200000000000003000000000000005.0000009', 50, 2, '-0.12313481713171373142907951990491671356466363502241');
}

function testSinWithSpecificConfig003() {
    checkSinResult('975675853314022371079225', 48, 5, '0.880137190184686438889125592539968640170534430859');
    checkSinResult('0.00000066558889026', 77, 6, '0.00000066558889025995085640282676346670712623242127613563915036627009080674622220984');
    checkSinResult('69299999.9999999999999', 46, 5, '-0.3462252058608000475638742067375334366431550575');
    checkSinResult('8111111111267488711.9286432453434826269588597', 62, 4, '-0.99113853372157352283292183868051054140090305817866106070973511');
    checkSinResult('82', 71, 0, '0.31322878243308515263353199729481870255069002611658346075413062493460387');
    checkSinResult('488826170909042284127242210428971', 76, 6, '0.8995289099301142050732477297866877720021805553317366849920338096104233105207');
    checkSinResult('9092229227242222522222222222.66', 18, 0, '-0.935465793019682237');
    checkSinResult('5805959970379373082098495883210891370.0067111', 46, 6, '0.2201197700332631564419599177639647998475543596');
    checkSinResult('926600000000000000590', 41, 2, '0.81228550764810620054247659502626219692234');
    checkSinResult('619490746366110587736593084360', 65, 1, '0.21194121003724604936564767272815880572843184525364715905320674006');
    checkSinResult('5473424', 25, 0, '0.09262060997310434002923837');
}

function testSinWithSpecificConfig004() {
    checkSinResult('5666666666666666666666666666666666666666666666616666626.6666', 87, 4, '-0.977239495645491722400759456250446932597508047794151805593705662875402907345001472700784');
    checkSinResult('499999.99999899999999999999999999999999999', 78, 5, '0.177832185579176104658571003320627225266903968719990210539163985433843099469721');
    checkSinResult('900000', 117, 3, '0.316282026370992050734738815532587276379228020456998295610327862506624971973233544404550831654146703508761520381016242');
    checkSinResult('83027766684462236825322.62114650623171519639122521318', 12, 4, '-0.476316326483');
    checkSinResult('925910897623', 129, 5, '0.792868652237225000804927754028414838623611710010734993138551247754919869022556217868513568705036768423332287103460206126685907362');
    checkSinResult('2918961308828646648994639730677467564302490828837720043486456401538236854705425586479512418277497121841759061091363', 23, 0, '-0.80586906475943044297492');
    checkSinResult('800000000000000', 13, 2, '0.9931677199759');
    checkSinResult('18400003.16100000000000032', 8, 6, '0.27307495');
    checkSinResult('99.999999999999999999999999999999999999999999999993', 63, 4, '-0.506365641109758793656557610459785432065032721296693555549406261');
    checkSinResult('20694757397464803355324887435556580472151471', 24, 6, '-0.0958707304545699270391254');
}
