/*
 * Copyright (c) 2025 Huawei Device Co., Ltd.
 * Licensed under the Apache License, Version 2.0(the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import { Decimal } from "@arkts.math.Decimal";

function main(): int {
    const suite = new arktest.ArkTestsuite("Decimal atan2 API tests");
    suite.addTest("Decimal atan2 with specific config", testAtan2WithSpecificConfigPart001);
    return suite.run();
}

function checkAtan2Result(y: string, x: string, pr: double, rm: int, expected: string) {
    Decimal.precision = pr;
    Decimal.rounding = rm;
    arktest.assertEQ(Decimal.atan2(y, x).valueOf(), expected);
}

function testAtan2WithSpecificConfigPart001() {
    Decimal.set({ precision: 40, rounding: 4, toExpNeg: -9e15, toExpPos: 9e15, minE: -9e15, maxE: 9e15 });
    checkAtan2Result('8000000', '366666666666666666666666666666466666666666666666666666666.6666666666666666666666666', 5, 4, '0.000000000000000000000000000000000000000000000000021818');
    checkAtan2Result('0.2', '0.189468318714349130097801836058861527404712938072131132348336428', 6, 1, '0.812432');
    checkAtan2Result('0.2858318234746344', '600000000000000000000000000000000000000000', 7, 0, '0.0000000000000000000000000000000000000000004763864');
    checkAtan2Result('4339137560184', '97970869.448873424003041514353519', 4, 4, '1.571');
    checkAtan2Result('-0.23311', '0.311511919081010226751458633564788098826129188077', 2, 6, '-0.64');
    checkAtan2Result('51748034844738', '1.9', 4, 3, '1.57');
    checkAtan2Result('489991.33896294143521760395611846731', '0.87', 9, 2, '1.57079456');
    checkAtan2Result('9708256886359351', '68007500000000000300000000.8000007', 7, 3, '0.0000000001427527');
    checkAtan2Result('-0.7243703154875085348', '-3', 8, 3, '-2.9046707');
    checkAtan2Result('45000000000000', '65555233', 10, 2, '1.570794871');
    checkAtan2Result('611492726146771524971502', '6', 1, 5, '2');
    checkAtan2Result('453102.0374285112290126', '144444444448560013578500490755362539053948899999999999999999', 8, 2, '0.0000000000000000000000000000000000000000000000000000031368603');
    checkAtan2Result('-93.61', '-0.0000399443101158077208687249496264941993597813459', 7, 2, '-1.570796');
    checkAtan2Result('2', '9581689854499862551.065722086916773096996491758707340479', 7, 4, '0.0000000000000000002087314');
    checkAtan2Result('1.3', '5.5', 6, 2, '0.232104');
    checkAtan2Result('-600000000', '-3.7', 64, 5, '-1.570796332961563285897988280138208232222043273348998383738452657');
    checkAtan2Result('11058591315337683586049031068.0579551185', '0.388959837250046012554110591319702948213801', 61, 0, '1.570796326794896619231321691604578803363795829358878500062293');
    checkAtan2Result('0.8448786268946126278', '0.13526', 50, 4, '1.4120494110103741256697724128137501343789286117212');
    checkAtan2Result('30287996', '40950.1689588762720486401957594518884943112430153961670406237501355555', 23, 0, '1.5694443012595347494123');
    checkAtan2Result('49990999999999999999299995399.9999999', '18373333333333333333333333333333333313333.31333333333333', 24, 0, '0.00000000000272084542815674891142779');
    checkAtan2Result('81050298736775188105704407264452322940639721302743656726962427972686398373147738700', '5758', 57, 6, '1.57079632679489661923132169163975144209858469968755291049');
    checkAtan2Result('88986', '933333549093318029464784161', 25, 4, '0.00000000000000000000009534212081677014822531107');
    checkAtan2Result('0.000000096379436364822449512580758185420939', '0.6', 8, 1, '0.00000016063239');
    checkAtan2Result('0.0000005078632254302310932666825377', '-406.26', 54, 1, '3.14159265233969914741200809306601738606958485281812206');
    checkAtan2Result('4.7407009601', '629989999.9099919', 27, 6, '0.00000000752504160506883380341035311');
}
