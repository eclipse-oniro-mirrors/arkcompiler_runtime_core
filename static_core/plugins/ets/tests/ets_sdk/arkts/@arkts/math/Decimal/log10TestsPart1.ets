/*
 * Copyright (c) 2025 Huawei Device Co., Ltd.
 * Licensed under the Apache License, Version 2.0(the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import { Decimal } from "@arkts.math.Decimal";

function main(): int {
    const suite = new arktest.ArkTestsuite("Decimal log10 API tests");
    Decimal.set({ precision: 40, rounding: 4, toExpNeg: 0, toExpPos: 0, minE: -9e15, maxE: 9e15 });
    suite.addTest("Decimal log10 with toExpNeg and toExpPos is 0", testLog10WithSpecificConfigPart001);
    suite.addTest("Decimal log10 with toExpNeg and toExpPos is 0", testLog10WithSpecificConfigPart002);
    suite.addTest("Decimal log10 with toExpNeg and toExpPos is 0", testLog10WithSpecificConfigPart003);
    suite.addTest("Decimal log10 with toExpNeg and toExpPos is 0", testLog10WithSpecificConfigPart004);
    return suite.run();
}

function checkLog10Result(n: string, expected: string, sd: number, rm: number) {
    Decimal.precision = sd;
    Decimal.rounding = rm;
    arktest.assertEQ(Decimal.log10(n).valueOf(), expected);
}

function testLog10WithSpecificConfigPart001() {
    checkLog10Result('4841183675443663188762.78', '2.16849516e+1', 9, 0);
    checkLog10Result('2.2001084261754258861227E-824263894', '-8.242638936575559156644572542921e+8', 31, 6);
    checkLog10Result('9.841678323183423382979E+889', '8.8999306917e+2', 11, 2);
    checkLog10Result('6.674865349047819300515860303037383179383821E-556564097058', '-6e+11', 1, 4);
    checkLog10Result('8.45466498447465675136763E+70601305204', '7.07e+10', 3, 2);
    checkLog10Result('4.0697767991474535745859451E+8734161', '8.7341616095705916437228490323670178068211817e+6', 44, 2);
    checkLog10Result('6.70979951730012416235067887E-4547', '-4.546173290455960817819339e+3', 25, 5);
    checkLog10Result('1.961351051236741863413961315199797E+4394416', '4.3944162925e+6', 11, 1);
    checkLog10Result('1.20350E+4555', '4.55508044609461104879595186822027e+3', 33, 1);
    checkLog10Result('5.343396356119981189485859467758323594750088722349E+24892595', '2e+7', 1, 5);
    checkLog10Result('2.7775691E+2645806266', '2.64580626644366e+9', 15, 5);
    checkLog10Result('1.764240941317483253710000989961978299234E+5939', '5.93924655789618074686663713956005233457194e+3', 42, 4);
}

function testLog10WithSpecificConfigPart002() {
    checkLog10Result('8.68143916033713750663285740502710E+89575', '8.95759385917261e+4', 15, 5);
    checkLog10Result('2.0184251149898158170597E-39207177567322', '-3.9207177567321694987359e+13', 23, 0);
    checkLog10Result('7.8630374961E+539873632527965', '5.39873632527965895590346671032e+14', 30, 0);
    checkLog10Result('1.770739036205380713465840899E+522651', '5.226512481545614797481e+5', 22, 5);
    checkLog10Result('56.141270516453102320117316389420550463886324330', '1.74928223679933121812e+0', 21, 1);
    checkLog10Result('2.6E+5789', '5.78941497334797081796442024405e+3', 30, 6);
    checkLog10Result('8.407507657913886653E-27559', '-2.755807533272843934770788577111161e+4', 34, 2);
    checkLog10Result('4.1537022577487997501227235564273504628803975515504335733E+8622517869456', '8.622517869456618435362577e+12', 25, 4);
    checkLog10Result('3.726614237233359549085256054317096792396039592E+7200803438362342', '7.20080343836234257131444e+15', 24, 6);
    checkLog10Result('3.07938388321764455968132812427213516E+38172329267940', '3.817232926794048846383244686011975e+13', 34, 5);
    checkLog10Result('8.6068240435353592489E+94696427410', '9.469642741e+10', 10, 5);
    checkLog10Result('9.37151210825471283E-865158860842', '-8.65158860841028190329358923938336e+11', 33, 1);
    checkLog10Result('34073473340739909295181032371.558228583698065018839103', '2.853241641e+1', 10, 0);
}

function testLog10WithSpecificConfigPart003() {
    checkLog10Result('2.28321371080052769522193640E+397673232597', '3.976732325973585465637362e+11', 26, 6);
    checkLog10Result('5.53931220752051773202347E+2499', '2.499743455843605290956496e+3', 25, 3);
    checkLog10Result('5.4924555890498123253396556014992712521439747540053861140793E+504', '5.047397665539842493968484323e+2', 28, 4);
    checkLog10Result('4.914452734123226135400656595986723583025E-1514546', '-1.514545308524837502946553307e+6', 28, 4);
    checkLog10Result('4.215555113580235490775E+55076305', '5.507630562485e+7', 13, 4);
    checkLog10Result('1.3930997480622E-57275499306', '-5.7e+10', 2, 6);
    checkLog10Result('85038.039893969528357085115812100515349', '4.929613241248970252641e+0', 22, 5);
    checkLog10Result('7.047729155038798766423401020155837037817938179206464104E+488246', '4.8824684804920574277260014554145031e+5', 35, 3);
    checkLog10Result('3.88173E+2768', '2.7685890253240487e+3', 17, 1);
    checkLog10Result('6.33149E+1646322918853513', '1.646322918854e+15', 13, 5);
    checkLog10Result('6.43213140539E+60', '6.080835490826104516024510232434e+1', 31, 6);
    checkLog10Result('5.050356774201666667327888987E+215326920301064', '2.1532692e+14', 8, 6);
}

function testLog10WithSpecificConfigPart004() {
    checkLog10Result('2739258.451754141451285499174145021701678302438665131045', '6.4376330103e+0', 12, 5);
    checkLog10Result('1.7192003502495036108123878166266976088E+7685', '7.685235326490961406452549530538800289e+3', 37, 6);
    checkLog10Result('9.6E+85774181', '8.57741819822712e+7', 15, 5);
    checkLog10Result('1.87124860546679312974E+3052798657448', '3.052798658e+12', 10, 0);
    checkLog10Result('3.083315086E-33', '-3.251098209216645436858e+1', 22, 4);
    checkLog10Result('7.2156825787920272800526474440273278298991942831883189391E+61531910219648', '6.153191021964885827742013e+13', 25, 1);
    checkLog10Result('8.468E-3306315551035784', '-3.306315551e+15', 10, 2);
    checkLog10Result('4.69070189E+72479', '7.24796712378329382129172143247016859e+4', 36, 1);
    checkLog10Result('3.35742E+835737', '8.35737526005673173223374107868535147886e+5', 39, 5);
    checkLog10Result('3.45402661747687024737712705E+1600722944676', '1.60072294467653832568001163266841e+12', 34, 1);
    checkLog10Result('4.7922316977869430764493052417197764722676671E+2312846442', '2.3128464426805378074275316244e+9', 29, 6);
    checkLog10Result('9.851193152845829667E+66954099', '6.69541e+7', 9, 0);
    checkLog10Result('1.1854901245488693749594005242978061319893665204E+36534622', '3.6e+7', 2, 1);
}
