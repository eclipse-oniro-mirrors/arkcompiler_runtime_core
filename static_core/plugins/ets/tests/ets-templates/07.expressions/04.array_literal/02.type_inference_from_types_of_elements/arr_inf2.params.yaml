# Copyright (c) 2021-2025 Huawei Device Co., Ltd.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

---
cases:
    - use: |-
          let a = [new Object, new Boolean]
          arktest.assertTrue( a instanceof Array )
          arktest.assertTrue( a[0] instanceof Object )
          arktest.assertTrue( a[1] instanceof Object )

    - use: |-
          let b = ["a", "b" + "c"]
          arktest.assertTrue( b instanceof Array )
          arktest.assertTrue( b[0] instanceof string )
          arktest.assertTrue( b[1] instanceof string )

    - use: |-
          let c = [1, 2, 3]
          arktest.assertTrue( c instanceof Array )
          arktest.assertTrue( c[0] instanceof number )
          arktest.assertTrue( c[1] instanceof number )
          arktest.assertTrue( c[2] instanceof number )

    - use: |-
          let x = ["a", 1, 3.14]
          let f = (p: (String|Int|Double)[]) => p
          let d = f(x)
          arktest.assertTrue( d instanceof Array, "instanceof Array failed" )
          arktest.assertTrue( d[0] instanceof (String|Int|Double), "instanceof d[0] failed" )
          arktest.assertTrue( d[1] instanceof (String|Int|Double), "instanceof d[1] failed" )
          arktest.assertTrue( d[2] instanceof (String|Int|Double), "instanceof d[2] failed" )

    - use: |-
          let x = ["a" + "", 1, 3.14]
          let f = (p: (String|Int|Double)[]) => p
          let d = f(x)
          arktest.assertTrue( d instanceof Array, "instanceof d failed" )
          arktest.assertTrue( d[0] instanceof (String|Int|Double), "instanceof d[0] failed" )
          arktest.assertTrue( d[1] instanceof (String|Int|Double), "instanceof d[1] failed" )
          arktest.assertTrue( d[2] instanceof (String|Int|Double), "instanceof d[2] failed" )

    - decl: |-
          class A {}
      use: |-
          let e = [(): void => {}, new A]
          arktest.assertTrue( e instanceof Array )
          arktest.assertTrue( e[0] instanceof ((() => void) | A) )
          arktest.assertTrue( e[1] instanceof ((() => void) | A) )

    - use: |-
          let y = [new Long(), new Number(), new Short()]
          let f = (p: (Long|Double|Short)[]) => p
          let x = f(y)
          arktest.assertTrue( x instanceof Array )
          arktest.assertTrue( x[0] instanceof Long|Double|Short )
          arktest.assertTrue( x[1] instanceof Long|Double|Short )
          arktest.assertTrue( x[2] instanceof Long|Double|Short )

    - decl: |-
          type my_type = Long|Double|null|Short|undefined
      use: |-
          let y = [new Long(), new Number(), null, new Short(), undefined]
          let f = (p: my_type[]) => p
          let x = f(y)
          arktest.assertTrue( x instanceof Array )
          for(let idx = 0; idx < x.length; idx++) {
              arktest.assertTrue(x[idx] instanceof my_type)
          }

    - decl: |-
          let cnt: number
          type F = () => number
          function foo(): number {
              return cnt++
          }
          function bar(): number {
              return ++cnt
          }
          function baz(): number {
              return cnt--
          }
      use: |-
          let y = [bar, null, baz, foo]
          let f = (p: (F|null)[]) => p
          let x = f(y)
          arktest.assertTrue( x instanceof Array )
          for(let idx = 0; idx < x.length; idx++) {
              arktest.assertTrue(x[idx] instanceof (F|null))
          }

    - use: |-
          let y = [false, 1, 14, 33.98]
          let f = (p: (Boolean|Int|Double)[]) => p
          let x = f(y)
          arktest.assertTrue( x instanceof Array )
          for(let idx = 0; idx < x.length; idx++) {
              arktest.assertTrue(x[idx] instanceof (Boolean|Int|Double))
          }

    - use: |-
          let y = [0 as long, "0" as string, 0 as short, 0x1 as int]
          let f = (p: (Long|string|Short|Int)[]) => p
          let x = f(y)
          arktest.assertTrue( x instanceof Array )
          for(let idx = 0; idx < x.length; idx++) {
              arktest.assertTrue(x[idx] instanceof (Long|string|Short|Int))
          }

    - use: |-
          let x = [new Object(), null, new Error(), null]
          arktest.assertTrue( x instanceof Array )
          for(let idx = 0; idx < x.length; idx++) {
              arktest.assertTrue(x[idx] instanceof (Object|null))
          }

    - use: |-
          let x = [new Boolean(true), "aaa", new Long()]
          arktest.assertTrue( x instanceof Array )
          for(let idx = 0; idx < x.length; idx++) {
              arktest.assertTrue(x[idx] instanceof (Boolean|string|long))
          }

    - use: |-
          let x = ["aa", "bb", null, "cc", null]
          arktest.assertTrue( x instanceof Array )
          for(let idx = 0; idx < x.length; idx++) {
              arktest.assertTrue(x[idx] instanceof (string|null))
          }

    - use: |-
          let x = [0, 1, 2, "aaa", 3, "bbb"]
          arktest.assertTrue( x instanceof Array )
          for(let idx = 0; idx < x.length; idx++) {
              arktest.assertTrue(x[idx] instanceof (string|int))
          }

    - use: |-
          let x = [null, null, null, ]
          arktest.assertTrue( x instanceof Array )
          for(let idx = 0; idx < x.length; idx++) {
              arktest.assertTrue(x[idx] instanceof null)
          }

    - use: |-
          let x = [undefined, undefined]
          arktest.assertTrue( x instanceof Array )
          for(let idx = 0; idx < x.length; idx++) {
              arktest.assertTrue(x[idx] instanceof undefined)
          }

    - use: |-
          let x = [null, undefined]
          arktest.assertTrue( x instanceof Array )
          for(let idx = 0; idx < x.length; idx++) {
              arktest.assertTrue(x[idx] instanceof (null|undefined))
          }

    - decl: |-
          type my_type = (p: string) => number
      use: |-
          let x0: my_type = (p: string) => { return p.length }
          let x = [x0]
          arktest.assertTrue( x instanceof Array )
          for(let idx = 0; idx < x.length; idx++) {
              arktest.assertTrue(x[idx] instanceof my_type)
          }

    - decl: |-
          let a = [true, "a", 42.0]
      use: |-
          arktest.assertTrue( a instanceof Array )
          for(let idx = 0; idx < a.length; idx++) {
              arktest.assertTrue(a[idx] instanceof (Boolean|string|Number))
          }

    - decl: |-
          class A {}
          class B {}
          class C {}
          let a = [{} as A, {} as B, {} as C, {} as A, {} as B, {} as C]
      use: |-
          arktest.assertTrue( a instanceof Array )
          for(let idx = 0; idx < a.length; idx++) {
              arktest.assertTrue(a[idx] instanceof (A|B|C))
          }

    - decl: |-
          class A {}
          class B extends A {}
          class C extends B {}
          let a = [{} as A, {} as B, {} as C, {} as A, {} as B, {} as C]
      use: |-
          arktest.assertTrue( a instanceof Array )
          for(let idx = 0; idx < a.length; idx++) {
              arktest.assertTrue(a[idx] instanceof A)
          }

    - decl: |-
          let a = ["a", "b", "c", "s", ]
      use: |-
          arktest.assertTrue( a instanceof Array )
          for(let idx = 0; idx < a.length; idx++) {
              arktest.assertTrue(a[idx] instanceof string)
          }

    - decl: |-
          let s: string = "s"
          let a = ["a", "b", "c", s, ]
      use: |-
          arktest.assertTrue( a instanceof Array )
          for(let idx = 0; idx < a.length; idx++) {
              arktest.assertTrue(a[idx] instanceof string)
          }

    - decl: |-
          interface I {}
          interface J {}
          class A implements I {}
          class B implements J {}
          let a: I = new A
          let b: J = new B
      use: |-
          let x = [a, b, "a", "b", a, b, "a", "b"]
          arktest.assertTrue( x instanceof Array )
          for(let idx = 0; idx < x.length; idx++) {
              arktest.assertTrue(x[idx] instanceof (I|J|string))
          }

    - decl: |-
          let a = c'1'
      use: |-
          let x = [a, c'2', '1', '2',]
          arktest.assertTrue( x instanceof Array)
          for(let idx = 0; idx < x.length; idx++) {
              arktest.assertTrue(x[idx] instanceof (string|Char))
          }

    - decl: |-
          type my_tuple = [number, Error]
          let b: bigint|double = 0n
          let c: double|string = "0"
          let d: my_tuple = [1.0, new Error]
      use: |-
          let x = [b, c, d, "1"]
          arktest.assertTrue(x instanceof Array)
          arktest.assertTrue(x[0] instanceof bigint|double)
          arktest.assertTrue(x[1] instanceof double|string)
          arktest.assertTrue(x[2] instanceof Object)
          arktest.assertTrue(x[3] instanceof string)
