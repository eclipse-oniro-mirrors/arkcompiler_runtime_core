# Copyright (c) 2025-2026 Huawei Device Co., Ltd.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

---
cases:
  # array of unions
  - type: '(bigint|boolean)[]'
    effective_type: 'Array'
    init1: '[1n, true]'
    init2: '[false, 0n]'

  # union of arrays
  - type: '(bigint[]|boolean[])'
    effective_type: 'Array'
    init1: '[0n, 1n]'
    init2: '[true, false]'

  # array of tuples
  - type: '([bigint, boolean])[]'
    effective_type: 'Array'
    init1: '[[1n, true]]'
    init2: '[[0n, false]]'

  # tuple of arrays
  - type: '([bigint[], boolean[]])'
    effective_type: '[Array, Array]'
    init1: '[[0n], [true]]'
    init2: '[[1n], [false]]'

  # union of tuples
  - type: '(my_tuple1 | my_tuple2)'
    decl: |-
      type my_tuple1 = [bigint, boolean]
      let a_tuple1: my_tuple1 = [0n, true]
      type my_tuple2 = [null, undefined]
      let a_tuple2: my_tuple2 = [null, undefined]
    effective_type: 'my_type'
    init1: 'a_tuple1'
    init2: 'a_tuple2'

  # tuple of unions
  - type: '[bigint|boolean, null|undefined]'
    effective_type: 'my_type'
    init1: '[0n, null]'
    init2: '[false, undefined]'

  # array with unions of tuples
  - type: 'my_union[]'
    decl: |-
      type my_tuple1 = [bigint, boolean]
      let a_tuple1: my_tuple1 = [0n, true]
      type my_tuple2 = [null, undefined]
      let a_tuple2: my_tuple2 = [null, undefined]
      type my_union = (my_tuple1 | my_tuple2)
    effective_type: 'Array'
    init1: '[a_tuple1]'
    init2: '[a_tuple2]'

  # array with tuples with unions
  - type: 'my_tuple[]'
    decl: |-
      type my_tuple = [bigint|boolean, undefined]
      let a_tuple1: my_tuple = [0n, undefined]
      let a_tuple2: my_tuple = [false, undefined]
    effective_type: 'Array'
    init1: '[a_tuple1]'
    init2: '[a_tuple2]'

  # union with tuples of arrays
  - type: '(my_tuple1 | my_tuple2)'
    decl: |-
      type my_tuple1 = [bigint[], boolean]
      let a_tuple1: my_tuple1 = [[0n], true]
      type my_tuple2 = [null[], undefined]
      let a_tuple2: my_tuple2 = [[null], undefined]
    effective_type: '[Array, boolean|undefined]|[Array, boolean]|[Array, undefined]'
    init1: 'a_tuple1'
    init2: 'a_tuple2'

  # tuple with unions of arrays
  - type: '[bigint[]|null[], undefined]'
    effective_type: '[Array, undefined]'
    init1: '[[0n], undefined]'
    init2: '[[null], undefined]'

  # union with arrays of tuples
  - type: '([bigint, boolean])[]|undefined'
    effective_type: 'Array|undefined'
    init1: '[[1n, true]]'
    init2: 'undefined'

  # tuple with arrays of unions
  - type: '[(bigint|boolean)[], undefined]'
    effective_type: '[Array, undefined]'
    init1: '[[1n, true], undefined]'
    init2: '[[false, 0n], undefined]'
