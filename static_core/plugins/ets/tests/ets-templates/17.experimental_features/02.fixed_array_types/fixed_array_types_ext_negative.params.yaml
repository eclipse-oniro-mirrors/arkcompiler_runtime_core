# Copyright (c) 2026 Huawei Device Co., Ltd.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

--- # Negative cases for fixed arrays
cases:
  # Fixed arrays are not compatible with resizable arrays.
  - desc: |-
      Assign fixed array variable with resizable array value.
    logic: |-
      let fixedArr: FixedArray<number> = [1, 2, 3];
      let resizeArr: number[] = [4, 5, 6];
      fixedArr = resizeArr;

  - desc: |-
      Assign resizable array variable with fixed array value.
    logic: |-
      let fixedArr: FixedArray<number> = [1, 2, 3];
      let resizeArr: number[] = [4, 5, 6];
      resizeArr = fixedArr;

  # Index value cannot be less than zero.
  - desc: |-
      Access element at negative index.
    logic: |-
      let x: FixedArray<int> = [3, 4, 5];
      x[-1];

  - desc: |-
      Assign element at negative index.
    logic: |-
      let x: FixedArray<int> = [3, 4, 5];
      x[-100] = 7;

  # Array element is accessed by its index. 
  # Index is an integer number starting from 0 to array length minus 1.
  - desc: |-
      Double index value.
    logic: |-
      let x: FixedArray<int> = [3, 4, 5];
      x[1.0] = 7;

  - desc: |-
      Float index value.
    logic: |-
      let x: FixedArray<int> = [3, 4, 5];
      x[1.0f] = 7;

  # Not covariant fixed array assignment.
  - desc: |-
      Contravariant fixed array assignment.
    decl: |-
      class Animal {}
      class Dog extends Animal {}
    logic: |-
      let dogs: FixedArray<Dog> = [new Dog(), new Dog(), new Dog()]
      dogs[0] = new Animal()

  - desc: |-
      Invariant fixed array assignment.
    decl: |-
      class Animal {}
      class Cat extends Animal {}
    logic: |-
      let dogs: FixedArray<Dog> = [new Dog(), new Dog(), new Dog()]
      dogs[0] = new Cat()
