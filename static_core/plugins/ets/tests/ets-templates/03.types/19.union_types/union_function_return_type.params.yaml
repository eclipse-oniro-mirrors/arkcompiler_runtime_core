# Copyright (c) 2026 Huawei Device Co., Ltd.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

cases2:
  - desc: Parse UT as a function returning boolean, string, int
    tags: ''
    dec1: |-
      type UT = () => boolean | String | Int
      function fun0(): boolean | String | Int { return true }
      function fun1(): boolean | String | Int { return "test" }
      function fun2(): boolean | String | Int { return 5 }
    check: |-
      let value: UT = fun0;
      arktest.assertEQ(value(), true);
      value = fun1;
      arktest.assertEQ(value(), "test");
      value = fun2;
      arktest.assertEQ(value(), 5);

  - desc: Parse UT as a function returning boolean, string, int
    tags: 'compile-only, negative'
    dec1: |-
      type UT = () => boolean | String | Int
    check: |-
      let value: UT = 7; // CTE
      arktest.assertEQ(value, 7);

  - desc: Parse UT as a union of int, () => boolean | string
    tags: ''
    dec1: |-
      type UT =  Int | () => boolean | String
      function foo(): boolean | String { return true }
    check: |-
      let value: UT = 7;
      arktest.assertEQ(value, 7);
      value = foo
      arktest.assertEQ(value(), true);

  - desc: Parse UT as a union of int, () => boolean | string
    tags: ''
    dec1: |-
      type UT =  Int | () => boolean | String
      function foo(): boolean { return true }
    check: |-
      let value: UT = foo;
      arktest.assertEQ(value(), true);

  - desc: Parse UT as a union of int, () => boolean | string
    tags: 'compile-only, negative'
    dec1: |-
      type UT =  Int | () => boolean | String
    check: |-
      let value: UT = true; // CTE
      arktest.assertEQ(value, true);

  - desc: Parse UT as a union of () => boolean, int, string
    tags: ''
    dec1: |-
      type UT = (() => boolean) | Int | String
      function foo() { return false }
    check: |-
      let value: UT = 42;
      arktest.assertEQ(value, 42);
      value = "test";
      arktest.assertEQ(value, "test");
      value = foo;
      arktest.assertEQ(value(), false);

  - desc: Parse UT as a union of (() => boolean | int), string
    tags: ''
    dec1: |-
      type UT = (() => boolean | Int) | String
      function foo() { return false }
      function bar() { return 7 }
    check: |-
      let value: UT = "test";
      arktest.assertEQ(value, "test");
      value = foo;
      arktest.assertEQ(value(), false);
      value = bar;
      arktest.assertEQ(value(), 7);

  - desc: Parse UT as a union of (() => boolean | int), string
    tags: 'compile-only, negative'
    dec1: |-
      type UT = (() => boolean | Int) | String
    check: |-
      let value: UT = 42; // CTE
      arktest.assertEQ(value, 42);

  - desc: Parenthesised and unparenthesized function combined
    tags: ''
    dec1: |-
      type UT = () => Int | undefined | ((() => boolean | string) | number)
      function fun0() { return 2 }
      function fun1() { return undefined }
      function fun2() { return 3.0 }
    check: |-
      let value: UT = fun0;
      arktest.assertEQ(value(), 2);
      value = fun1;
      arktest.assertEQ(value(), undefined);
      value = fun2;
      arktest.assertEQ(value(), 3.0);

  - desc: Parenthesised and unparenthesized function combined
    tags: ''
    dec1: |-
      type UT = () => Int | undefined | ((() => boolean | string) | number)
      function fun0() { return () => { return "test" } }
      function fun1() { return () => { return true } }
    check: |-
      let value: UT = fun0;
      arktest.assertEQ(value()(), "test");
      value = fun1;
      arktest.assertEQ(value()(), true);

  - desc: Parenthesised and unparenthesized function combined
          number shouldn't be appended to the second function's return type
    tags: 'compile-only, negative'
    dec1: |-
      type UT = () => Int | undefined | ((() => boolean | string) | number)
      function foo() { return () => { return 2.5 }}
    check: |-
      let value: UT = foo; // CTE
      arktest.assertEQ(value()(), 2.5);
