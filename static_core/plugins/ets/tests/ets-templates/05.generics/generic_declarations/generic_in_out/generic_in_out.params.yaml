# Copyright (c) 2025 Huawei Device Co., Ltd.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

generic_in_out:
  - desc: Shows the covariant behavior of generics on return types.
    dec1: |-
      interface Producer<out T> {
        produce(): T;
      }
      class FruitProducer implements Producer<Fruit> {
        produce(): Fruit {
          return new Fruit();
        }
      }
      class AppleProducer extends FruitProducer {
        produce(): Apple {
          return new Apple();
        }
      }
      class Fruit {}
      class Apple extends Fruit {}
    check: |-
      const fruitProducer: Producer<Fruit> = new AppleProducer();
      const fruit: Fruit = fruitProducer.produce();
      arktest.assertTrue(fruit instanceof Apple);

  - desc: Show covariance of generic classes in return types.
    dec1: |-
      interface A<out T> {
        getValue(): T;
      }
      class C implements A<string> {
        getValue(): string {
          return "Hello";
        }
      }
    check: |-
      const a: A<string> = new C();
      const c: A<object> = a;
      arktest.assertEQ(c.getValue(), "Hello");

  - desc: Verify the invariability of the'in' keyword.
    dec1: |-
      interface Consumer<in T> {
        consume(value: T): object;
      }
      class A implements Consumer<object> {
        consume(value: object): object {
          return value;
        }
      }
    check: |-
      const anyConsumer: Consumer<object> = new A();
      const numberConsumer: Consumer<number> = anyConsumer;
      arktest.assertEQ(numberConsumer.consume(42), 42);
