# Copyright (c) 2021-2026 Huawei Device Co., Ltd.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

---
cases:
  # classes
  #0
  - use: |-
      let v: A = new <X> A(new Y())  // Y is not X
    stdout: |-
      "Semantic error ESE0318: Type 'T' cannot be assigned to type 'Object|null'"
  #1
  - use: |-
      let v: A = new <null|X> A(new X())  // syntax error
    stdout: |-
      "Semantic error ESE0318: Type 'T' cannot be assigned to type 'Object|null' "
  #2
  - use: |-
      let v: A = new <null> A(null)  // syntax error
    stdout: |-
      "Semantic error ESE0318: Type 'T' cannot be assigned to type 'Object|null'"
  #3
  - use: |-
      let v: A = new <X> A(new X())  // wrong bound
    bound: ' extends Y'
    stdout: |-
      "Semantic error ESE0170: Type 'A<T>' is generic but type argument were not provided."
  #4
  - use: |-
      let v: A = new <X|null> A(null)  // wrong bound
    bound: ' extends Object'
    stdout: |-
      "Semantic error ESE0170: Type 'A<T>' is generic but type argument were not provided."

  # interfaces
  #5
  - use: |-
      let v: A = new <I> A(new Y())  // Y is not I
    stdout: |-
      "Semantic error ESE0170: Type 'A<T>' is generic but type argument were not provided."
  #6
  - use: |-
      let v: A = new <J|null> A(null)  // wrong bound
    bound: ' extends I|null'
    stdout: |-
      "Semantic error ESE0170: Type 'A<T>' is generic but type argument were not provided."

  # arrays
  #7
  - use: |-
      let v: A = new <X[]> A(new Object[0])  // wrong array type
    stdout: |-
      "Semantic error ESE0170: Type 'A<T>' is generic but type argument were not provided."
  #8
  - use: |-
      let v: A = new <X[]> A(new X[0])  // wrong bound
    bound: ' extends Y[]'
    stdout: |-
      "Semantic error ESE0170: Type 'A<T>' is generic but type argument were not provided."
  #9
  - use: |-
      let v: A = new <X[]|null> A(new X[1][0])  // X[][] is not X[]
    bound: ' extends X[]|null'
    stdout: |-
      "Semantic error ESE0170: Type 'A<T>' is generic but type argument were not provided."
  #10
  - use: |-
      let v: A = new <X[]|null> A(null)  // wrong bound
    bound: ' extends Object[][]|null'
    stdout: |-
      "Semantic error ESE0170: Type 'A<T>' is generic but type argument were not provided."
  #11
  - use: |-
      let v: A<X[]|null> = new A<X[]|null> (new X[0])
    bound: ' extends Object[]|null'
    stdout: |-
      "Semantic error ESE0228: Type argument 'Array<X>|null' should be a subtype of 'Array<Object>|null' constraint"

# aliases
  #12
  - use: |-
      let v: A<B> = new A<B> (new Color[0])
    decl: type B = Color[]
    stdout: |-
      "Semantic error ESE0318: Type 'T' cannot be assigned to type 'Object|null'"
  #13
  - use: |-
      let v: A = new <B> A(new Color[0])  // X is not Color
    decl: type B = X[]
    stdout: |-
      "Semantic error ESE0170: Type 'A<T>' is generic but type argument were not provided."
  #14
  - use: |-
      let v: A = new <B> A(new X[1][0])  // syntax error in alias
    decl: type B = null|X[][]
    stdout: |-
      "Semantic error ESE0170: Type 'A<T>' is generic but type argument were not provided."
  #15
  - use: |-
      let v: A = new <B> A(new X[0])  // wrong bound
    bound: ' extends Y[]'
    decl: type B = X[]
    stdout: |-
      "Semantic error ESE0170: Type 'A<T>' is generic but type argument were not provided."
  #16
  - use: |-
      let v: A = new <B|null> A(new X[0])  // out of bound
    bound: ' extends X[]'
    decl: type B = X[]
    stdout: |-
      "Semantic error ESE0170: Type 'A<T>' is generic but type argument were not provided."
  #17
  - use: |-
      let v: A<B|null> = new A<B|null> (new Y[0])
    bound: ' extends X[]|null'
    decl: type B = X[]
    stdout: |-
      "Semantic error ESE0127: No matching construct signature for constr_args1_neg_17.A(Array<Y>)"

  # not a reference type
  #18
  - use: |-
      let v: A = new <Color> A(Color.Red)
    stdout: |-
      "Semantic error ESE0170: Type 'A<T>' is generic but type argument were not provided."
  #19
  - use: |-
      let v: A = new <int> A(1)
    stdout: |-
      "Semantic error ESE0170: Type 'A<T>' is generic but type argument were not provided."