# Copyright (c) 2026 Huawei Device Co., Ltd.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

---
cases:
  - hierarchy: |-
      |  I1 I2   
      |   \ /    
      |    C1    

    descr: "Conflicting implementations in interfaces"
    decl: |-
      interface I1 {
        foo(): this { return this } 
      } 
      interface I2 {
        foo(): this { return this } 
      }
      class C1 implements I1, I2 {}
    call: "let c1 = new C1()"
    expected_out: "Semantic error ESE0187: Method 'foo' is declared in I1 and I2 interfaces."

  - hierarchy: |-
     |  I1 I2     
     |   \ /      
     |    C1 I3   
     |     \ /    
     |      C2    

    descr: "Conflicting implementations in interfaces I1, I2"
    decl: |-
      class A1 {}
      class A2 extends A1 {}
      interface I1 { 
        foo(): A1 { return new A1() } 
      }
      interface I2 {
        foo(): A2 { return new A2() } 
      }
      class C1 implements I1, I2 {}
      interface I3 {
        foo(): A2 { return new A2() } 
      }
      class C2 extends C1 implements I3 {}
    call: "let c2 = new C2()"
    expected_out: "Semantic error ESE0187: Method 'foo' is declared in I1 and I2 interfaces."

  - hierarchy: |-
     |  I1 I2 I3   
     |   \ /  /    
     |    C1 I4 I5 
     |     \ /__/   
     |      C2    

    descr: "Conflicting implementations in interfaces I1, I2"
    decl: |-
      interface I1 {
        foo(): this { return this } 
      } 
      interface I2 {
        foo(): this { return this } 
      }
      class C1 implements I1, I2 {}
      interface I3 {
        foo(): this { return this } 
      }
      interface I4 extends I3 {}
      interface I5 {
        foo(): this { return this } 
      }
      class C2 extends C1 implements I4, I5 {}
    call: "let c2 = new C2()"
    expected_out: "Semantic error ESE0187: Method 'foo' is declared in I1 and I2 interfaces."

  - descr: "Conflicting implementations in interfaces I3, I5"
    decl: |-
      interface I1 {
        foo(): this { return this } 
      } 
      interface I2 {}
      class C1 implements I1, I2 {}
      interface I3 {
        foo(): this { return this } 
      }
      interface I4 extends I3 {}
      interface I5 {
        foo(): this { return this } 
      }
      class C2 extends C1 implements I4, I5 {}
    call: "let c2 = new C2()"
    expected_out: "Semantic error ESE0187: Method 'foo' is declared in I3 and I5 interfaces."

  - descr: "Conflicting implementations in interfaces I4, I5"
    decl: |-
      interface I1 {
        foo(): this { return this } 
      } 
      interface I2 {}
      class C1 implements I1, I2 {}
      interface I3 {}
      interface I4 extends I3 {
        foo(): this { return this } 
      }
      interface I5 {
        foo(): this { return this } 
      }
      class C2 extends C1 implements I4, I5 {}
    call: "let c2 = new C2()"
    expected_out: "Semantic error ESE0187: Method 'foo' is declared in I4 and I5 interfaces."

  - hierarchy: |-
     |  I1 I2 I3   
     |   \ /  /    
     |    C1 I4 I5 I6 I7
     |     \ /__/  /__/   
     |      C2    I8  
     |        \  /
     |         C3

    descr: "Conflicting implementations in interfaces I1, I2"
    decl: |-
      interface I1 {
        foo(): this { return this } 
      } 
      interface I2 {
        foo(): this { return this } 
      }
      class C1 implements I1, I2 {}
      interface I3 {
        foo(): this { return this } 
      }
      interface I4 extends I3 {}
      interface I5 {
        foo(): this { return this } 
      }
      class C2 extends C1 implements I4, I5 {}
      interface I6 {
        foo(): this { return this } 
      } 
      interface I7 {
        foo(): this { return this } 
      } 
      interface I8 extends I6, I7 {}
      class C3 extends C2 implements I8 {}
    call: "let c3 = new C3()"
    expected_out: "Semantic error ESE0187: Method 'foo' is declared in I3 and I5 interfaces."

  - descr: "Conflicting implementations in interfaces I3, I5"
    decl: |-
      interface I1 {
        foo(): this { return this } 
      } 
      interface I2 {}
      class C1 implements I1, I2 {}
      interface I3 {
        foo(): this { return this } 
      }
      interface I4 extends I3 {}
      interface I5 {
        foo(): this { return this } 
      }
      class C2 extends C1 implements I4, I5 {}
      interface I6 {
        foo(): this { return this } 
      } 
      interface I7 {
        foo(): this { return this } 
      } 
      interface I8 extends I6, I7 {}
      class C3 extends C2 implements I8 {}
    call: "let c3 = new C3()"
    expected_out: "Semantic error ESE0187: Method 'foo' is declared in I3 and I5 interfaces."

  - descr: "Conflicting implementations in interfaces I4, I5"
    decl: |-
      interface I1 {} 
      interface I2 {
        foo(): this { return this } 
      }
      class C1 implements I1, I2 {}
      interface I3 {}
      interface I4 extends I3 {
        foo(): this { return this } 
      }
      interface I5 {
        foo(): this { return this } 
      }
      class C2 extends C1 implements I4, I5 {}
      interface I6 {} 
      interface I7 {
        foo(): this { return this } 
      } 
      interface I8 extends I6, I7 {}
      class C3 extends C2 implements I8 {}
    call: "let c3 = new C3()"
    expected_out: "Semantic error ESE0187: Method 'foo' is declared in I4 and I5 interfaces."

  - descr: "Conflicting implementations in interfaces I6, I7"
    decl: |-
      interface I1 {} 
      interface I2 {
        foo(): this { return this } 
      }
      class C1 implements I1, I2 {}
      interface I3 {}
      interface I4 extends I3 {
        foo(): this { return this } 
      }
      interface I5 {}
      class C2 extends C1 implements I4, I5 {}
      interface I6 {
        foo(): this { return this } 
      } 
      interface I7 {
        foo(): this { return this } 
      } 
      interface I8 extends I6, I7 {}
      class C3 extends C2 implements I8 {}
    call: "let c3 = new C3()"
    expected_out: "Semantic error ESE0187: Method 'foo' is declared in I6 and I7 interfaces."
