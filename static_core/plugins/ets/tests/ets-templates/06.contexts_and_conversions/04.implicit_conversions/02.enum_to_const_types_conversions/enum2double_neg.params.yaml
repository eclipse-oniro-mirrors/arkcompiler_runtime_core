# Copyright (c) 2025 Huawei Device Co., Ltd.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

---
cases:
    - decl: |-
          let s: int = 42
          class A {
              fld1: int = Color.Red
              fld2: number = Color.Blue + Color.Green
              fld3: int = s + Color.Green - 42.0
          }
      use: |-
          // assignment-like context, field declaration
          let a: A = new A()
          arktest.assertEQ(a.fld1, 0.0)
          arktest.assertEQ(a.fld2, 201.0)
          arktest.assertEQ(a.fld3, 100.0)

    - decl: |-
          let s: int = 42
          class A {
              fld1: int
              fld2: int
              fld3: number
          }
      use: |-
          // assignment-like context, field assignment
          let a: A = new A()
          a.fld1 = Color.Red
          a.fld2 = Color.Blue + Color.Green
          a.fld3 = s + Color.Green + 1
          arktest.assertEQ(a.fld1, 0.0)
          arktest.assertEQ(a.fld2, 201.0)
          arktest.assertEQ(a.fld3, 143.0)

    - decl: |-
          let s: int = 42
          function foo(p: int): number {
              return p + 1
          }
      use: |-
          // call context, function
          arktest.assertEQ(foo(Color.Red), 1.0)
          arktest.assertEQ(foo(Color.Green + Color.Blue), 202.0)
          arktest.assertEQ(foo(s + Color.Blue + 2), 146.0)

    - decl: |-
          let s: int = 42
          class A {
              fld: int
              constructor(p: int) {
                  this.fld = p
              }
          }
      use: |-
          // call context, constructor
          arktest.assertEQ(new A(Color.Red).fld, 0.0)
          arktest.assertEQ(new A(Color.Green + Color.Blue).fld, 201.0)
          arktest.assertEQ(new A(s + Color.Blue + 10).fld, 153.0)

    - decl: |-
          let s: int = 42
      use: |-
          // call context, lambda
          arktest.assertEQ(((p: number): number => { return p })(Color.Red), 0.0)
          arktest.assertEQ(((p: int): int => { return p })(Color.Green + Color.Blue), 201)
          arktest.assertEQ(((p: int): number => { return p })(s + Color.Blue + 5), 148.0)
