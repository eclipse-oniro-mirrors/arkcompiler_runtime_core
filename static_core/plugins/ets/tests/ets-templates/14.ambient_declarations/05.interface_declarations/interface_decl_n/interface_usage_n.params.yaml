# Copyright (c) 2025-2026 Huawei Device Co., Ltd.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

cases:
  # interfaces
  - import: |-
      A
    decl: |-
      class B implements A {
        a: string = 'b'
      }
    use: |-
      const b: B  = new B
      arktest.assertTrue(b.a instanceof number) // should fail on verifier
      arktest.assertEQ(b.a, 'b') //  should be unreachable
  - import: |-
      B
    decl: |-
      class C implements B {
        a: int = 1
        b: float = 1.0f
        c: String[] = ["c"]
      }
    use: |-
      const c: C  = new C
      arktest.assertEQ(c.a, 1)
      arktest.assertEQ(c.b, 1.0)
      arktest.assertTrue(c.c[0] instanceof Byte) // should fail on verifier
      arktest.assertEQ(c.c[0], "c") // should be unreachable
  - import: |-
      C
    decl: |-
      class D implements C {
        foo(x: number, y: string, z: double[]): string {
          return x.toString() + y + z.toString();
        }
      }
    use: |-
      const d: D  = new D
      arktest.assertEQ(d.foo(1, '1', [1]), '111')  // should fail on verifier
  - import: |-
      D
    decl: |-
      class E implements D<string, number> {
        a: string = 'a'
        b: number = 1
      }
    use: |-
      const e: E = new E
      arktest.assertEQ(e.a, 'a')
      arktest.assertTrue(e.b instanceof Number) // should fail on verifier
      arktest.assertEQ(e.b, 1) // should be unreachable
  - import: |-
      E
    decl: |-
      class F implements E<number,number,string> {
        foo(x: number, y: number): string {
          return (x + y).toString()
        }
      }
    use: |-
      const f: F = new F
      arktest.assertEQ(f.foo(1,1), '2') // should fail on verifier
  - import: |-
      M,F
    decl: |-
      class C implements M {
        f: string = 'a'
      }
    use: |-
      const c: C = new C
      arktest.assertTrue(c.f instanceof Number) // should fail on verifier
      arktest.assertEQ(c.f, 'a')
  - import: |-
      K
    decl: |-
      class B implements K {
        a: int = 1
        get foo(): int {return this.a}
        set foo(v: int) { this.a = v}
      }
    use: |-
      const b: B = new B
      arktest.assertTrue(b.a instanceof String) // should fail on verifier
      arktest.assertEQ(b.a, 1) // should be unreachable
      b.a = 2
      arktest.assertEQ(b.a, 2)
  - import: |-
      J
    decl: |-
      class I implements J {}
    use: |-
      const i: I = new I
      arktest.assertEQ(i.foo(1), '1') // should fail on verifier
