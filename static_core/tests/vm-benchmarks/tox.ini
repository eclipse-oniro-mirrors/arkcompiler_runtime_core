[tox]
requires =
    tox>=4
envlist = py{37,38,310,311,313},mypy,flake8,pylint

[testenv]
description = Run unit tests
deps =
    pytest
; note: tests are broken on python3.7
commands =
    py{38,310,311,313}: python3 -m pytest -v ./tests/

[testenv:mypy]
description = Type checking
deps =
    mypy==1.8.0
commands =
    mypy {posargs:src}

[flake8]
extend-ignore = D100,D101,D102,D103,D105,D106,D107
exclude =
    .git,
    __pycache__,
    dist,
    extra-plugins,
    benches
max-complexity = 20
max-line-length = 120

[testenv:flake8]
description = Flake8 linter
skip_install = true
deps =
    flake8==7.3.0
    flake8-bugbear==24.12.12
    flake8-docstrings==1.7.0
    flake8-typing-imports==1.17.0
    pep8-naming==0.15.1
commands =
    flake8 src/

[testenv:pylint]
description = Pylint linter
skip_install = true
max-line-length = 120
deps =
    pyflakes==3.2.0
    pylint==3.1.0
    jinja2
commands =
    pylint --max-line-length=120 src/
